import{r,j as t}from"./index-BkzoR9p6.js";import{a as v}from"./api-CI6MUtbO.js";import{m as w}from"./proxy-Da6xkRlv.js";import"./index-t--hEgTQ.js";import"./constant-7LJQrAjc.js";const N=6,U=()=>{const[x,h]=r.useState([]),[s,p]=r.useState(""),[a,i]=r.useState(1),[d,u]=r.useState(1),[o,y]=r.useState("all");r.useEffect(()=>{b()},[a,s,o]);const b=async()=>{try{const e=await v.get("admin/users",{params:{page:a,limit:N,search:s,role:o}});h(e.data.users),u(e.data.pages)}catch(e){console.error("Error fetching users",e)}},g=x.filter(e=>{const l=e.name.toLowerCase().includes(s.toLowerCase())||e.email.toLowerCase().includes(s.toLowerCase()),n=o==="all"||e.role===o;return l&&n}),m=e=>{e>=1&&e<=d&&i(e)},f=()=>{const e=[["Name","Email","Role"],...g.map(({name:c,email:j,role:k})=>[c,j,k])].map(c=>c.join(",")).join(`
`),l=new Blob([e],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a");n.href=URL.createObjectURL(l),n.download="user_list.csv",n.click()};return t.jsxs("div",{className:"p-6 bg-gray-100 dark:bg-gray-900 min-h-screen",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"ðŸ‘¥ All Users"}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[t.jsx("input",{type:"text",placeholder:"Search by name or email...",value:s,onChange:e=>{p(e.target.value),i(1)},className:"px-4 py-2 rounded-md border border-gray-300 dark:border-gray-700 dark:bg-gray-800 text-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"}),t.jsxs("select",{value:o,onChange:e=>{y(e.target.value),i(1)},className:"px-4 py-2 rounded-md border border-gray-300 dark:border-gray-700 dark:bg-gray-800 text-gray-700 dark:text-white",children:[t.jsx("option",{value:"all",children:"All Roles"}),t.jsx("option",{value:"admin",children:"Admin"}),t.jsx("option",{value:"student",children:"Student"}),t.jsx("option",{value:"teacher",children:"Teacher"})]}),t.jsx("button",{onClick:f,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md",children:"ðŸ“¤ Export CSV"})]})]}),t.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:g.map((e,l)=>t.jsxs(w.div,{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md border-l-4 border-indigo-500 hover:scale-[1.03] transition-all duration-200",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:l*.05},children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e.name}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.email}),t.jsxs("span",{className:"inline-block mt-2 px-3 py-1 text-sm bg-indigo-100 dark:bg-indigo-700 text-indigo-800 dark:text-white rounded-full",children:["Role: ",e.role]})]},e._id))}),t.jsxs("div",{className:"flex justify-center mt-8 gap-2",children:[t.jsx("button",{className:"px-4 py-2 bg-gray-300 dark:bg-gray-700 rounded hover:bg-gray-400 dark:hover:bg-gray-600",onClick:()=>m(a-1),disabled:a===1,children:"â¬… Prev"}),t.jsxs("span",{className:"text-gray-700 dark:text-white px-4 py-2 font-semibold",children:["Page ",a," of ",d]}),t.jsx("button",{className:"px-4 py-2 bg-gray-300 dark:bg-gray-700 rounded hover:bg-gray-400 dark:hover:bg-gray-600",onClick:()=>m(a+1),disabled:a===d,children:"Next âž¡"})]})]})};export{U as default};
